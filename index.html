<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DYICT Register</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .phone-container {
      position: relative;
      width: 390px;
      height: 844px;
      background: #000;
      border-radius: 50px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.4), 0 0 0 14px #1a1a1a;
      overflow: hidden;
    }

    .notch {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 30px;
      background: #000;
      border-radius: 0 0 20px 20px;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .speaker {
      width: 60px;
      height: 6px;
      background: #1a1a1a;
      border-radius: 3px;
    }

    .camera {
      width: 12px;
      height: 12px;
      background: #0a0a0a;
      border-radius: 50%;
      border: 2px solid #1a1a1a;
    }

    .screen {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
      overflow-y: auto;
      position: relative;
    }

    .app-container {
      padding: 50px 30px 30px;
      min-height: 100%;
    }

    .logo-section {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 0.6s ease;
    }

    .app-title {
      font-size: 32px;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
      letter-spacing: -1px;
    }

    .app-subtitle {
      color: #a0a0c0;
      font-size: 14px;
      font-weight: 500;
    }

    .section {
      animation: fadeIn 0.4s ease;
    }

    .hidden {
      display: none !important;
    }

    .card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .section-title {
      color: #fff;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
    }

    .btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 16px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn:active::before {
      width: 300px;
      height: 300px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      box-shadow: 0 8px 20px rgba(102,126,234,0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(102,126,234,0.4);
    }

    .btn-success {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      color: #fff;
      box-shadow: 0 8px 20px rgba(17,153,142,0.3);
    }

    .btn-danger {
      background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
      color: #fff;
      box-shadow: 0 8px 20px rgba(238,9,121,0.3);
    }

    .btn-warning {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: #fff;
      box-shadow: 0 8px 20px rgba(240,147,251,0.3);
    }

    .input-group {
      margin-bottom: 16px;
    }

    .input-label {
      color: #a0a0c0;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    input, select, textarea {
      width: 100%;
      padding: 14px 16px;
      background: rgba(255,255,255,0.08);
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
      background: rgba(255,255,255,0.12);
      box-shadow: 0 0 0 4px rgba(102,126,234,0.1);
    }

    textarea {
      min-height: 200px;
      resize: vertical;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }

    .link {
      color: #667eea;
      text-decoration: none;
      font-size: 14px;
      font-weight: 600;
      display: inline-block;
      margin-top: 12px;
      transition: all 0.3s ease;
    }

    .link:hover {
      color: #764ba2;
      transform: translateX(4px);
    }

    .status-message {
      padding: 14px;
      border-radius: 12px;
      margin-bottom: 16px;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
      animation: slideIn 0.4s ease;
    }

    .status-success {
      background: rgba(17,153,142,0.15);
      border: 1px solid rgba(17,153,142,0.3);
      color: #38ef7d;
    }

    .status-error {
      background: rgba(238,9,121,0.15);
      border: 1px solid rgba(238,9,121,0.3);
      color: #ff6a00;
    }

    .grid-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .grid-buttons .btn {
      margin-bottom: 0;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @media (max-width: 420px) {
      .phone-container {
        width: 100%;
        max-width: 420px;
        height: 100vh;
        border-radius: 0;
        box-shadow: none;
      }
    }

    /* Custom scrollbar */
    .screen::-webkit-scrollbar {
      width: 6px;
    }

    .screen::-webkit-scrollbar-track {
      background: transparent;
    }

    .screen::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.2);
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <div class="phone-container">
    <div class="notch">
      <div class="speaker"></div>
      <div class="camera"></div>
    </div>

    <div class="screen">
      <div class="app-container">
        <div class="logo-section">
          <div class="app-title">DYICT Register</div>
          <div class="app-subtitle">Digital Attendance System</div>
        </div>

        <!-- Role Selection -->
        <div id="roleSection" class="section">
          <div class="card">
            <h3 class="section-title">Select Your Role</h3>
            <button class="btn btn-primary" onclick="chooseRole('Student')">üë®‚Äçüéì Student</button>
            <button class="btn btn-primary" onclick="chooseRole('Facilitator')">üë®‚Äçüè´ Facilitator</button>
            <button class="btn btn-primary" onclick="chooseRole('Admin')">üë§ Admin</button>
          </div>
        </div>

        <!-- Class Selection -->
        <div id="classSection" class="section hidden">
          <div class="card">
            <h3 class="section-title">Select Your Class</h3>
            <div class="input-group">
              <label class="input-label">Class</label>
              <select id="classSelect">
                <option value="Safari">ü¶Å Safari</option>
                <option value="Opera">üé≠ Opera</option>
                <option value="Hanna">üå∏ Hanna</option>
                <option value="Mozilla">ü¶ä Mozilla</option>
              </select>
            </div>
            <div id="studentInput" class="hidden">
              <div class="input-group">
                <label class="input-label">Student Number</label>
                <input type="number" id="studentNumber" placeholder="Enter 1-25" min="1" max="25">
              </div>
            </div>
            <button class="btn btn-primary" onclick="proceedAttendance()">Continue</button>
            <button class="btn btn-danger" onclick="goBack()">Back</button>
          </div>
        </div>

        <!-- Attendance Marking -->
        <div id="attendanceSection" class="section hidden">
          <div class="card">
            <h3 class="section-title" id="attendancePrompt"></h3>
            <div class="grid-buttons">
              <button class="btn btn-success" onclick="markAttendance('Present')">‚úì Present</button>
              <button class="btn btn-danger" onclick="markAttendance('Absent')">‚úó Absent</button>
            </div>
          </div>
        </div>

        <!-- Admin Login -->
        <div id="adminLogin" class="section hidden">
          <div class="card">
            <h3 class="section-title">Admin Login</h3>
            <div class="input-group">
              <label class="input-label">Username</label>
              <input type="text" id="adminUser" placeholder="Enter username">
            </div>
            <div class="input-group">
              <label class="input-label">Password</label>
              <input type="password" id="adminPass" placeholder="Enter password">
            </div>
            <button class="btn btn-primary" onclick="adminLogin()">Login</button>
            <button class="btn btn-danger" onclick="goBack()">Back</button>
            <a class="link" onclick="forgotPassword()">Forgot Password?</a>
          </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="section hidden">
          <div class="card">
            <h3 class="section-title">Admin Dashboard</h3>
            <button class="btn btn-primary" onclick="viewAttendance()">üìä View Attendance</button>
            <button class="btn btn-warning" onclick="exportAttendance()">üì• Export CSV</button>
            <button class="btn btn-success" onclick="showChangePassword()">üîí Change Password</button>
            <button class="btn btn-danger" onclick="logoutAdmin()">Logout</button>
          </div>
        </div>

        <!-- Attendance Display -->
        <div id="attendanceDisplay" class="section hidden">
          <div class="card">
            <h3 class="section-title">Attendance Records</h3>
            <textarea id="attendanceText" readonly></textarea>
            <button class="btn btn-danger" onclick="closeAttendanceDisplay()">Close</button>
          </div>
        </div>

        <!-- Change Password -->
        <div id="changePasswordSection" class="section hidden">
          <div class="card">
            <h3 class="section-title">Change Password</h3>
            <div class="input-group">
              <label class="input-label">Current Password</label>
              <input type="password" id="oldPass" placeholder="Enter current password">
            </div>
            <div class="input-group">
              <label class="input-label">New Password</label>
              <input type="password" id="newPass" placeholder="Enter new password">
            </div>
            <div class="input-group">
              <label class="input-label">Confirm Password</label>
              <input type="password" id="confirmPass" placeholder="Confirm new password">
            </div>
            <button class="btn btn-success" onclick="changePassword()">Save Password</button>
            <button class="btn btn-danger" onclick="cancelChangePassword()">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let students = {};
    const attendanceLog = [];
    const facilitators = {
      "Safari": "Mr Bila",
      "Opera": "Mr joseph",
      "Mozilla": "Mathapelo",
      "Hanna": "jowi"
    };
    let currentRole = "";
    let currentClass = "";
    let currentName = "";
    let adminPassword = "1234";

    // Load students
    const studentsData = {
      "Safari": [
        { "id": 1, "name": "Siphokazi" },
        { "id": 2, "name": "Rethabile" },
        { "id": 3, "name": "Amanda" },
        { "id": 4, "name": "Tshego" },
        { "id": 5, "name": "Marcia" },
        { "id": 6, "name": "Rofhiwa" },
        { "id": 7, "name": "Pertunia" },
        { "id": 8, "name": "Tiisetso" },
        { "id": 9, "name": "Pheshla" },
        { "id": 10, "name": "Tumza" },
        { "id": 11, "name": "Akani" },
        { "id": 12, "name": "Lebo" },
        { "id": 13, "name": "Keo" },
        { "id": 14, "name": "Usha" },
        { "id": 15, "name": "Sandile" },
        { "id": 16, "name": "Mogadi" },
        { "id": 17, "name": "Uviwe" },
        { "id": 18, "name": "Kwena" },
        { "id": 19, "name": "Gomolemo" },
        { "id": 20, "name": "Mandy" },
        { "id": 21, "name": "Lisa" },
        { "id": 22, "name": "Yvone" },
        { "id": 23, "name": "Gogo" },
        { "id": 24, "name": "SiphoEsihle" },
        { "id": 25, "name": "Elton" }
      ],
      "Opera": [
        { "id": 1, "name": "Banele" },
        { "id": 2, "name": "Neo" },
        { "id": 3, "name": "Kefilwe" },
        { "id": 4, "name": "Mpho" },
        { "id": 5, "name": "Onkarabile" },
        { "id": 6, "name": "Lethabo" },
        { "id": 7, "name": "Naledi" },
        { "id": 8, "name": "Aobakwe" },
        { "id": 9, "name": "Boitumelo" },
        { "id": 10, "name": "Kagiso" },
        { "id": 11, "name": "Otsile" },
        { "id": 12, "name": "Palesa" },
        { "id": 13, "name": "Itumeleng" },
        { "id": 14, "name": "Kelebogile" },
        { "id": 15, "name": "Tebogo" },
        { "id": 16, "name": "Omphile" },
        { "id": 17, "name": "Ofentse" },
        { "id": 18, "name": "Thato" },
        { "id": 19, "name": "Lesedi" },
        { "id": 20, "name": "Tumelo" },
        { "id": 21, "name": "Thapelo" },
        { "id": 22, "name": "Karabo" },
        { "id": 23, "name": "Refilwe" },
        { "id": 24, "name": "Olebogeng" },
        { "id": 25, "name": "Tshepo" }
      ],
      "Hanna": [
        { "id": 1, "name": "Ayanda" },
        { "id": 2, "name": "Ntando" },
        { "id": 3, "name": "Siphesihle" },
        { "id": 4, "name": "Lwandile" },
        { "id": 5, "name": "Khanyisile" },
        { "id": 6, "name": "Sibusiso" },
        { "id": 7, "name": "Nosipho" },
        { "id": 8, "name": "Bongiwe" },
        { "id": 9, "name": "Lindiwe" },
        { "id": 10, "name": "Thobile" },
        { "id": 11, "name": "Zanele" },
        { "id": 12, "name": "Nomvula" },
        { "id": 13, "name": "Vusi" },
        { "id": 14, "name": "Thami" },
        { "id": 15, "name": "Nomsa" },
        { "id": 16, "name": "Sandile" },
        { "id": 17, "name": "Njabulo" },
        { "id": 18, "name": "Noluthando" },
        { "id": 19, "name": "Zama" },
        { "id": 20, "name": "Lebo" },
        { "id": 21, "name": "Boikanyo" },
        { "id": 22, "name": "Thembeka" },
        { "id": 23, "name": "Andile" },
        { "id": 24, "name": "Khaya" },
        { "id": 25, "name": "Nandi" }
      ],
      "Mozilla": [
        { "id": 1, "name": "Jordan" },
        { "id": 2, "name": "Taylor" },
        { "id": 3, "name": "Morgan" },
        { "id": 4, "name": "Alex" },
        { "id": 5, "name": "Cameron" },
        { "id": 6, "name": "Riley" },
        { "id": 7, "name": "Bailey" },
        { "id": 8, "name": "Casey" },
        { "id": 9, "name": "Devon" },
        { "id": 10, "name": "Harley" },
        { "id": 11, "name": "Jamie" },
        { "id": 12, "name": "Kendall" },
        { "id": 13, "name": "Logan" },
        { "id": 14, "name": "Peyton" },
        { "id": 15, "name": "Reagan" },
        { "id": 16, "name": "Skylar" },
        { "id": 17, "name": "Sydney" },
        { "id": 18, "name": "Tatum" },
        { "id": 19, "name": "Tristan" },
        { "id": 20, "name": "Avery" },
        { "id": 21, "name": "Dakota" },
        { "id": 22, "name": "Elliot" },
        { "id": 23, "name": "Finley" },
        { "id": 24, "name": "Gray" },
        { "id": 25, "name": "Hunter" }
      ]
    };
    students = studentsData;

    function chooseRole(role) {
      currentRole = role;
      document.getElementById("roleSection").classList.add("hidden");
      if (role === "Admin") {
        document.getElementById("adminLogin").classList.remove("hidden");
      } else {
        document.getElementById("classSection").classList.remove("hidden");
        if (role === "Student") {
          document.getElementById("studentInput").classList.remove("hidden");
        }
      }
    }

    function goBack() {
      document.querySelectorAll(".section").forEach(div => div.classList.add("hidden"));
      document.getElementById("roleSection").classList.remove("hidden");
    }

    function proceedAttendance() {
      currentClass = document.getElementById("classSelect").value;
      if (currentRole === "Facilitator") {
        currentName = facilitators[currentClass] || null;
        if (!currentName) {
          alert("No facilitator assigned to this class.");
          goBack();
          return;
        }
      } else {
        let num = parseInt(document.getElementById("studentNumber").value);
        if (isNaN(num) || num < 1 || num > 25) {
          alert("Please enter a valid number between 1 and 25.");
          return;
        }
        currentName = students[currentClass].find(s => s.id === num)?.name;
        if (!currentName) {
          alert("Student not found.");
          return;
        }
      }
      document.getElementById("classSection").classList.add("hidden");
      document.getElementById("attendanceSection").classList.remove("hidden");
      document.getElementById("attendancePrompt").innerText = `Hi ${currentName}! üëã`;
    }

    function markAttendance(status) {
      attendanceLog.push({
        name: currentName,
        class: currentClass,
        role: currentRole,
        status: status,
        time: new Date().toLocaleString()
      });
      alert(`‚úì ${currentName} marked as ${status} in ${currentClass}`);
      goBack();
    }

    function adminLogin() {
      const user = document.getElementById("adminUser").value;
      const pass = document.getElementById("adminPass").value;
      if (user === "admin" && pass === adminPassword) {
        document.getElementById("adminLogin").classList.add("hidden");
        document.getElementById("adminPanel").classList.remove("hidden");
      } else {
        alert("‚ùå Access Denied. Incorrect credentials.");
      }
    }

    function logoutAdmin() { goBack(); }

    function viewAttendance() {
      if (attendanceLog.length === 0) {
        alert("No attendance records yet.");
        return;
      }
      document.getElementById("adminPanel").classList.add("hidden");
      document.getElementById("attendanceDisplay").classList.remove("hidden");
      let text = "Name, Class, Role, Status, Time\n\n";
      attendanceLog.forEach(r => {
        text += `${r.name}, ${r.class}, ${r.role}, ${r.status}, ${r.time}\n`;
      });
      document.getElementById("attendanceText").value = text;
    }

    function closeAttendanceDisplay() {
      document.getElementById("attendanceDisplay").classList.add("hidden");
      document.getElementById("adminPanel").classList.remove("hidden");
    }

    function exportAttendance() {
      if (attendanceLog.length === 0) {
        alert("No attendance to export.");
        return;
      }
      let csv = "Name,Class,Role,Status,Time\n";
      attendanceLog.forEach(r => {
        csv += `${r.name},${r.class},${r.role},${r.status},${r.time}\n`;
      });
      const blob = new Blob([csv], { type: "text/csv" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "attendance_log.csv";
      link.click();
      alert("‚úì Attendance exported successfully!");
    }

    function showChangePassword() {
      document.getElementById("adminPanel").classList.add("hidden");
      document.getElementById("changePasswordSection").classList.remove("hidden");
    }

    function cancelChangePassword() {
      document.getElementById("changePasswordSection").classList.add("hidden");
      document.getElementById("adminPanel").classList.remove("hidden");
    }

    function changePassword() {
      const oldPass = document.getElementById("oldPass").value;
      const newPass = document.getElementById("newPass").value;
      const confirmPass = document.getElementById("confirmPass").value;

      if (oldPass !== adminPassword) {
        alert("‚ùå Current password is incorrect.");
        return;
      }
      if (newPass !== confirmPass) {
        alert("‚ùå New passwords do not match.");
        return;
      }
      if (newPass.trim() === "") {
        alert("‚ùå New password cannot be empty.");
        return;
      }
      adminPassword = newPass;
      alert("‚úì Password changed successfully!");
      cancelChangePassword();
    }

    function forgotPassword() {
      alert("Default credentials:\nUsername: admin\nPassword: 1234");
    }
  </script>
</body>
</html>
